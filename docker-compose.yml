# yaml-language-server: $schema=https://raw.githubusercontent.com/docker/cli/master/cli/compose/schema/data/config_schema_v3.9.json
version: "3.9"

services:
    genpac:
        build:
            context: .
            dockerfile: Dockerfile
        container_name: genpac-runner
        restart: unless-stopped
        network_mode: bridge

        environment:
            # å®šæ—¶ä»»åŠ¡
            # CRON_SCHEDULE: "0 0 */3 * *"

            # æ—¶åŒº
            TZ: Asia/Shanghai

            # PAC é…ç½®
            PAC_PROXY: "SOCKS5 192.168.31.200:7893; DIRECT"
            # æ˜¯å¦å‹ç¼©
            PAC_COMPRESS: "false"
            # æ˜¯å¦ç²¾ç¡®åŒ¹é…
            PAC_PRECISE: "false"
            # GFWLIST_URL: "https://github.mus.pp.ua/https://github.com/gfwlist/gfwlist/raw/master/gfwlist.txt"

            # è‡ªå®šä¹‰åˆ—è¡¨ï¼ˆåªæœ‰åœ¨æœªé…ç½®GFWLIST_URLæ—¶ç”Ÿæ•ˆï¼‰
            PAC_BLOCK_LIST: ""
            PAC_DIRECT_LIST: ""

            # webhook å¯é€‰ï¼Œä¸è®¾ç½®åˆ™ä¸è§¦å‘
            WEBHOOK_SUCCESS_URL: "https://oapi.dingtalk.com/robot/send?access_token=Token"
            WEBHOOK_SUCCESS_OPTIONS: |
                {
                  "msgtype": "markdown",
                  "markdown": {
                    "title": "tracker",
                    "text": "âœ… genpac æ›´æ–°æˆåŠŸ \n ğŸ“¦ proxy.pac å·²ç”Ÿæˆ"
                  }
                }

            WEBHOOK_FAILURE_URL: "https://oapi.dingtalk.com/robot/send?access_token=Token"
            WEBHOOK_FAILURE_OPTIONS: |
                {
                  "msgtype": "markdown",
                  "markdown": {
                    "title": "tracker",
                    "text": "âŒ genpac æ›´æ–°å¤±è´¥"
                  }
                }

        # æš´éœ² HTTP ç«¯å£
        ports:
            - "1200:8080"

        # volumes å¯ä»¥å»æ‰ï¼Œå¦‚æœä¸éœ€è¦æŒä¹…åŒ–
        # volumes:
        #   - /data/genpac-data:/data
